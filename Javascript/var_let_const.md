## var, let, const란

---

자바스크립트에서 변수를 선언할 때 사용한 것들이다.

자바스크립트에서 변수 선언은 `선언 -> 초기화` 단계를 거쳐 수행된다.

> 1. 선언 : 변수명을 등록해 자바스크립트 엔진에 변수의 존재를 알린다.
> 2. 초기화 : 값을 저장하기 위한 메모리 공간을 확보하고 암묵적으로 `undefined`를 할당해 초기화한다.

### 호이스팅(hoisting)

- 변수 선언은 런타임에서 되는 것이 아니라, 그 이전 단계에서 실행된다. 자바스크립트 엔진은 소스코드를 한 줄씩 순차적으로 실행하기에 앞서 변수 선언을 포함한 모든 선언문을 찾아내 먼저 실행한다. 즉 변수 선언이 어디에 있든지 상관없이 다른 코드보다 먼저 실행되는 특징을 호이스팅(hoisting)이라 한다.
  `var`, `let`, `const`, `function`, `class` 키워드를 사용해 선언한 모든 식별자(변수, 함수, 클래스 등)는 호이스팅 된다.

  1. var, 함수 선언문 : 호이스팅 발생

  ```javascript
  console.log(a); // undefined

  var a = 5;
  console.log(a); // 5

  foo(); // foo
  function foo() {
    console.log("foo");
  }
  ```

  > - 변수 a가 선언되기 전에 참조되었음에도 에러가 발생하지 않는다. 이는 코드 실행 전에 자바스크립트 내부에서 미리 변수를 선언하고 undefined로 초기화를 해두었기 때문이다. <br />
  > - 함수선언문 또한 동일하게 선언되기 전 호출됨에도 에러가 발생하지 않는다. <br />

  2. let, const, 함수표현식 : 호이스팅이 발생하지만, 다른 방식으로 작동됨. <br />

  ```javascript
  console.log(a); // ReferenceError: a is not defined

  let a = 5;

  console.log(a); // 5

  foo(); // error

  var foo = function () {
    console.log("foo");
  };
  ```

  > - 변수 a가 선언되기 전에 참조하니 에러가 발생한다. 이는 호이스팅이 발생하는 것이 아닌, 변수의 선언과 초기화 사이에 일시적으로 변수 값을 참조할 수 없는 구간인 TDZ(Temporal Dead Zone)에 빠졌기 때문에 보이는 현상임. <br />
  > - 함수표현식을 사용하거든 let 또는 const로 변수를 선언하는 경우, 자바스크립트 내부에서는 코드 실행 전 변수 선언만 해둘뿐 초기화는 코드 실행 과정에서 변수 선언문을 만났을 때 수행한다. 그렇기 때문에 호이스팅이 발생하기는 하지만, 값을 참조할 수 없기 때문에 동작하지 않는 것처럼 보이는 것임. <br />

### 할당

- 변수에 값을 할당 할때는 할당 연산자(=)를 사용한다. 변수 선언과 할당은 하나의 문(statement)으로 단축 표현 할 수 있지만 두 개의 실행 시점은 다르다. <br />
  변수 선언은 호이스팅 되어 런타임 이전에 실행. <br />
  값의 할당은 소스코드가 순차적으로 실행되는 런타임에서 실행.

### var

- var는 변수 선언단계와 초기화 단계가 동시에 진행되어 암묵적으로 undefined를 할당해 초기화한다. 반대로 선언이전에 값을 불러도 undefined가 나오는데 변수 선언이 런타임에서 되는 것이 아니라, 그 이전 단계에서 먼저 실행되기 때문이다.

### let

- let는 선언 단계와 초기화 단계가 분리되어 진행된다. 즉 런타임 이전에 자바스크립트 엔진에 의해 선언 단계가 먼저 실행되지만, 초기화 단계가 실행되지 않았을 때 해당 변수에 접근하려고 하면 참조에러가 뜬다.
  `Uncaught ReferenceError: name is not defined`
  따라서 let 키워드로 선언한 변수는 스코프의 시작 지점부터 초기화 단계 시작 지점까지 변수를 참조 할 수 없는 일시적 사각지대(Temporal Dead Zone:TDZ)구간에 존재한다. <br />
  let은 변수 중복 선언이 불가하지만 재할당은 가능하다.

### const

- const 키워드는 선언 단계와 초기화 단계가 동시에 진행된다. let 키워드로 선언한 경우, 런타임 이전에 선언이 되어 자바스크립트 엔진에 이미 존재하지만 초기화가 되지 않았기 때문에 name is not defined라는 문구가 떴다. 하지만 const 키워드로 선언한 경우, 선언과 초기화가 동시에 이루어져야 하지만 런타임 이전에는 실행될 수 없다. 따라서 초기화가 진행되지 않은 상태기 때문에 `Uncaught ReferenceError: Cannot access 'name' before initialization` 에러 문구가 뜬다. <br />
  const 는 재선언, 재할당 둘 다 불가하다. 재할당의 경우, 원시값은 불가능하지만 객체는 가능하다. const 키워드는 재할당을 금지할 뿐, '불변'을 의미하지 않는다.

### 유효범위

- 자바스크립트에서 모든 코드 블록(if, for, while, try/catch)이 지역 스코프를 만든다. 하지만 var키워드로 선언된 변수는 오로지 함수의 코드 블록만 지역스코프로 인정한다. 이것을 함수 레벨 스코프라고 한다.

## 정리

---

변수 선언은 런타임에서 되는 것이 아니라 그 이전에 실행. (호이스팅되어서)
값이 할당되는 것은 순차적으로 실행되는 런타임에서 실행.

var는 선언과 초기화
