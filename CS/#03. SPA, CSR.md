# SPA, CSR (3/2)

## 1. SPA (Single Page Application)

- 전통적인 웹 사이트는 지금보다 문서 하나에 전달되는 파일의 용량이 적었다. 그래서 어떤 요소를 한번 클릭하면 완전히 새로운 페이지를 서버에서 전송해주곤 했다. 그래도 상관없었다. 그러나 현대에 이르러 점차 웹 사이트가 고도화됨에 따라 한 페이지에 해당하는 페이지 용량이 커져갔고, 매번 새로운 페이지를 전달하는 게 점점 버거워지게 되었다.

- 이러한 문제를 해결하기 위해 등장한 것이 `SPA(Single Page Application)`이다. 이름에도 파악할 수 있듯이, 어떤 웹 사이트의 전체 페이지를 하나의 페이지에 담아 동적으로 화면을 바꿔가며 표현하는 것이 SPA이다. 뭔가를 클릭하거나 스크롤 하면, 상호작용하기 위한 최소한의 요소만 변경이 일어난다. 페이지변경이 일어난다고 보여지는 것 또한 최초 로드된 자바스크립트를 통해 미리 브라우저에 올라간 템플릿만 교체되는 것이다.

- SPA 프레임워크로 유명한 `Angular`, `React`, `Vue가` 하는 일은 뭘까? 세부적인 구현 개념은 다르겠지만 그 목적은 모두 SPA를 쉽고 확장성 있게 구현하는 것을 목표로 하고 잇다. 이들은 `Virtual DOM`이라는 개념을 사용해 SPA를 구현한다. SPA의 문제점은 자바스크립트로 인한 DOM조작이 빈번하게 일어나 브라우저의 성능을 저하시킨다는 것이다. Virtual DOM을 사용하는 프레임워크들은 실제 DOM 트리를 흉내 낸 가상의 객체 트리로 html 정보를 저장하고 있다가, 이 트리에 변경이 발생하면 모든 변화를 모아 `단 한번 브라우저를 호출`해 화면을 갱신하는 방법을 사용한다. 이렇게 하면 브라우저와의 불필요한 상호작용을 최소하하면서 인터렉티브한 웹 사이트를 만드는 것이 가능하다.

## 2. Create React App (CRA) > Only CSR

리액트로 아무 초기 설정 없이 CRA를 통해 React 기반의 SPA를 구현할 수 있게 되었다.

- CSR (Client Side Rendering)
  - 웹 페이지의 렌더링이 클라이언트(브라우저) 측에서 일어나는 것을 의미한다.
  - 브라우저는 최초 요청에서 html, js, css 확장자의 파일을 차례로 다운로드한다.
  - 최초로 불러온 html의 내용은 비어있다. (html, body 태그만 존재)
  - js 파일의 다운로드가 완료된 다음, 해당 js 파일이 dom을 빈 html 위에 그리기 시작한다.
  - 백엔드 호출을 최소화 할 수 있다.
  - 라우팅(새로운 페이지로 이동)을 하더라도 html 자체가 바뀌는 것이 아니라 Javascript 차원에서 새로운 화면을 그려내는 것!

## 3. SEO (Search Engine Optimization)

하지만 CSR은 SEO(구글 검색 엔진 최적화)에 약하다. 그 이유는 첫 베이지가 빈 html이기 때문에 구글봇의 검색 엔진에 걸리지 않기 때문이다. 결국 검색 엔진이 빠져나간뒤 js 파일이 다운로드 되어 페이지를 로드하게 되면 검색 노출이 안된다.

SPA의 장점을 살리면서 SEO도 같이 챙길 수 있는 방안이 SSR(Server Side Rendering)이다.
