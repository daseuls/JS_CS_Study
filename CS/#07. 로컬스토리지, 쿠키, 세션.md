# 1. 로컬 스토리지

HTML5에는 데이터를 클라이언트에 저장할 수 있는 새로운 자료구조인 웹스토리지가 생겼는데 이 웹스토리지에는 로컬 스토리지와 세션스토리지가 있습니다.
로컬스토리지에는 클라이언트의 대한 정보가 강제로 지우지 않는 이상 영구적으로 보관이 되어 브라우저를 종료해도 데이터가 보관되어 다음번 접속에도 그 데이터를 사용할 수 있지만,  
세션 스토리지는 데이터가 지속적으로 보관되지 않습니다. 따라서 브라우저가 종료되면 데이터도 세션스토리지 안의 데이터도 함께 삭제가 됩니다.
따라서 지속적으로 필요한 데이터는 로컬스토리지에, 잠깐동안 필요한 정보나 조금 더 보안이 중요한 정보는 세션스토리지에 저장을 합니다.

Web Storage는 데이터의 지속성과 관련하여 두 가지 용도의 저장소를 제공한다.
LocalStorage는 저장한 데이터를 명시적으로 지우지 않는 이상 영구적으로 보관이 가능하다. 앞서 말한대로 도메인마다 별도로 로컬 스토로지가 생성된다. Windows 전역 객체의 LocalStorage라는 컬렉션을 통해 저장과 조회가 이루어진다. SessionStorage는 데이터의 지속성과 액세스 범위에 특수한 제한이 존재한다.

SessionStorage는 windows 전역 객체의 sessionStorage라는 컬렉션을 통해 저장과 조회가 이루어진다.
SessionStorage는 데이터가 지속적으로 보관되지 않는다. 이는 마치 브라우저 기반 세션 쿠키와 그 성질이 비슷한데, 현재 페이지가 브라우징되고 있는 브라우저 컨텍스트 내에서만 데이터가 유지된다.
LocalStorage는 브라우저를 종료해도 데이터는 보관되어 다음번 접속에도 그 데이터를 사용할 수 있는 반면, SessionStorage는 브라우저가 종료되면 데이터도 같이 지워진다. 즉, 브라우저가 종료되면 SessionStorage도 삭제된다는 것이다.

# 쿠키와 세션이 생겨나게 된 배경 (HTTP)

HTTP는 기본적으로 Stateless(무상태)한 프로토콜이다. stateless하다는 것은 클라이언트와 서버와의 통신에서 서버는 클라이언트의 상태를 알 수 없다는 것이다.

서버에서 클라이언트의 상태를 알 수 없는 근본적인 이유는 바로 HTTP가 Connectionless(비연결지향)하다는 특성이 있기 때문이다.

connectionless는 request에 대한 response를 해주면 서버와 클라이언트간 연결이 끊어진다는 것을 의미한다.

다시 말해, HTTP 통신에서는 서버와 클라이언트간 통신이 끝나면 연결이 끊어지기 때문에 서버는 클라이언트의 상태를 알 수 없다. 하지만 클라이언트의 상태를 서버에서는 알아야하는 상황이 있다. (ex. 유저 인증)
그래서 이러한 HTTP의 특성을 보완하기 위해 생겨난 것이 쿠키(Cookie)와 세션(Session)이다.

# 2. 쿠키

- 쿠키는 클라이언트 로컬에 저장되는 key-value 형태의 데이터이다.

- 클라이언트에서 서버에 request를 할 때 쿠키를 담아 보내면, 서버에서는 쿠키에서 상태 데이터를 읽고 클라이언트의 상태를 파악하여 그에 따른 response를 준다.

- 쿠키는 클라이언트와 서버가 한번도 통신한 이력이 없다면 존재하지 않는다. 쿠키가 없는 상태에서 request하면 서버에서는 쿠키를 생성하여 response한다. 그 다음 클라이언트에서는 쿠키 정보를 저장하고, 추후 보내는 request에는 쿠키를 담아 보내서 서버에서 쿠키를 통해 클라이언트 상태를 파악하는 것이다.

- 쿠키는 웹스토리지가 개념이 도입되기 이전에 브라우저에서 데이터를 저장하는 공간이다. 4kb의 작은 용량이 단점이다.

# 3. 세션

- 쿠키는 상태 데이터를 클라이언트에 저장했다면, 세션은 서버에 저장한다.

- 세션은 기본적으로는 쿠키를 사용한다. 하지만 세션 id만 쿠키로 저장하고, 상태 데이터들은 세션 id를 id로 하여 서버에 저장한다.

- 세션 역시 클라이언트와 서버가 한번도 통신한 이력이 없다면 존재하지 않고, 세션이 없는 상태에서 request하면 서버에서는 세션을 생성하고 세션 id를 쿠키에 담아 response 한다.

- 세션은 세션 id를 제외한 나머지 상태 데이터들이 서버에 저장되기 때문에, 클라이언트에 저장되는 쿠키보다 보안성이 높다. 하지만 상태 데이터를 서버에서 가지고 있는만큼 부하가 늘어난다는 단점이 있다. 즉 서버에 세션이 많이 존재하면 서버가 터질 수도 있다.

- 또한 서버에서 데이터를 바로 읽어 처리할 수 있는 쿠키에 반해, 세션은 세션 id를 통해 세션을 읽어온 다음 또 데이터를 읽어야 하기 때문에 속도가 상대적으로 느리다.

- 세션은 기본적으로 브라우저가 종료되면 소멸된다.
